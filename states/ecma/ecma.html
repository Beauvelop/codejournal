<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=desert"></script>
<div class="ecma-container">
  <aside><span class="rot90">{{state}}</span></aside>

  <div class="ecma-entry entry">
    <pre>
      <!--entire page pre-->

<!--

-->

<div class="slate-skyblue-fr"><h3 class="chtitle">Recursion</h3>
  II. Factorial
  <pre class="prettyprint w40">function factorial(n) {
    if(n< 2) {
      return 1;
    } else {
      return n * factorial(n-1);
    }
  }
  var result = factorial(5);
  var result2 = factorial(3);

  console.log(result); // 120
  console.log(result2); // 6
</pre>

</div>

<div class="framed8"><h3 class="chtitle mango">IFEE sending an argument to itself</h3>
<pre class="prettyprint w40 ctr">const firstName = "Leroy";
(function(input) {
  console.log(`Hello, I'm ${input}`);
}(firstName));

// Hello, I'm Leroy</pre>
  </div>
  <div class="simple-frame3">
    <h3 class="chtitle dkblue">Super-simple Closure</h3>
    <div class="col-2"><pre class="prettyprint w40">function makeGreeting(language) {

  var counter = 0;
  return function(firstName, lastName) {
    counter++;
    var lang;
    if(language === "es") {
      console.log(`Hola, ${firstName} ${lastName}`);
      lang= "Spanish";
    }
    if(language === "en") {
      console.log(`Hello, ${firstName} ${lastName}`);
      lang = "English";
    }
    console.log(`Run in ${lang} ${counter} times.`);
  }
}
var spanGreet = makeGreeting("es");
var engGreet = makeGreeting("en");
spanGreet("Susan", "Jenkins");
engGreet("John", "Wilson");
engGreet("John", "Wilson");</pre>
<br><pre class="w40 dkbg ivr">

  Fn returning a Fn. A counter that increments on each sucessive execution.

  This example sets up a function factory of sorts.
  Pay attention to separate execution contexts.
<hr>


//  Hola, Susan Jenkins
//  Run in Spanish 1 times.
//  Hello, John Wilson
//  Run in English 1 times.
//  Hello, John Wilson
//  Run in English 2 times.

</pre>
    </div>
    <div class="framed5">
      <h3 class="chtitle ivr">Nice Closure creating Arrays, Objects & strings with args</h3>
      <pre class="prettyprint">
    function culledBits(type) {
    var arrCull = [];
    var objCull = {};
    var strCull = "";
    var counter = 0;
    <div class="fRight dkbg dkorange w40">
  // This is based on the same concept above.
  // counter++ retains value of previous calls.

  // One might create a func that sorts args--> and fills arrays, object, etc into type.
    </div>

    return function(item) {
      counter++;
      if (type === "obj") {
        objCull[counter] = item;
        var res = objCull;
      } if (type === "arr") {
          arrCull.push(item);
          var res = arrCull;
      } else if (type ==="str") {
        item = item.toString();
        strCull+=item + ' ';
        res = `${strCull}`;
        res = res.trim(" ") + ".";
      }
      console.log(res);
      return res;
    }
  }

  var makeArr = culledBits("arr");
  var makeObj = culledBits("obj");
  var makeStr = culledBits("str");

  <div class="ltbg w40 fRight">
// Object {1: 4}
// [false]
// (2) [false, Object]
// Oh,.
// Object {1: 4, 2: "what's up?"}
// (3) [false, Object, 38]
// Oh, How I Love.
// Object {1: 4, 2: "what's up?", 3: 0}
// (4) [false, Object, 38, null]
// (5) [false, Object, 38, null, "hello"]
// Oh, How I Love oranges.</div>

  makeObj(4);
  makeArr(false);
  makeArr({"key": "value"})
  makeStr("Oh,")
  makeObj("what's up?")
  makeArr(38);
  makeStr("How I Love")
  makeObj(0)
  makeArr(null);
  makeArr("hello");
  makeStr("oranges")
</pre>
    </div>
    <h3 class="chtitle dkred">Here's a nice little closure/callback combo with a timer</h3>
    <pre class="prettyprint w60 ctr">
  <div class="fRight dkbg forest-red-fr sm">
    // okay wait a sec...
    // Live reload enabled.
    // Okay, I'm done
    // (5000 milliseconds)
  </div>
  function tellMeWhenDone(callback) {
  console.log("okay wait a sec...");
    return function(timer) {
      setTimeout(function() {
        callback(); // it runs the function that I give it!
        console.log(`(${timer} milliseconds)`);
      },timer);
    }
  }

  var doit = tellMeWhenDone(function() {
    console.log("Okay, I'm done");
  })
  doit(5000);
</pre></div>
  <div class="simple-frame2 col-2">
    <h4>quick quiz</h4>
<pre class="prettyprint w40 ctr linenums">
scream();
function scream() {
  console.log("Ahhhhhhh!!");
}

quiet();
var quiet = function() {
  console.log("Shhhhhhhh!")
}




</pre>
    <br /><br> Difference between line 2 and line 7?
    <i class="ans med dkred">scream is a <b class="wh">FUNCTION STATEMENT</b></i><br>
    <i class="ans med dkred">quiet is a <b class="wh">FUNCTION EXPRESSION</b></i> <br>
What is the return of this and why?
    <i class="ans med dkred"><img class="w20" src="./img/error1.png" alt="error1"><br />
  <span class="wh sm">Function expressions are NOT hoisted!</span></i>

  </div>

  <div class="framed2">
    <h4 class="chtitle dkred">TRIVIA</h4> Proof that Functions are objects
    <pre class="prettyprint">
  function greet() {
    console.log("Hi");
  }

  greet.language = ('English'); // I place a prop on the Fn

  console.log(greet.language); //❗️ English ❗️
  console.log(greet.name); // greet❗️
  console.log(greet);
  // function greet() { console.log("Hi"); } ❗️This code is merely a property on the object!
</pre>
<h4 class="chtitle dkred">Functional Programming</h4>
<div class="col-2">
<div class="brdr-w">I am going to pass an entire function as a parameter to another function.
--In the Fn to which I pass the parameter, I am going to invoke that puppy!
</div>
<pre class="prettyprint w40">
function ohFunkThis(funk) {
  funk();
}
ohFunkThis(function() {console.log("I'm a parameter!")});
// I'm a parameter!
</pre>
</div>
    <h4 class="chtitle ltred">This is the essence of "Functional Programming"!</h4></div>
  <div class="framed6">
    <h2 class="chtitle wh">Objects</h2>
    <h3>Dead-simple Constructor Fn</h3>
    <pre class="prettyprint w60">function Person(name) {
  this.name = name;
}
var cara = new Person("Cara");
console.log(cara.name); // "Cara"

// "new" operator redefines context of 'this'--it is not window.
</pre>
    <h3>Prototypal Inheritance</h3>
    <pre class="prettyprint linenums">
var personConstruction = {
  name: "Default Anon",
  greet: function(name, mood) {
    name = name || "you";
    mood = mood || "great";
    let str = `Hello, ${name}. I'm ${this.name} & I feel ${mood} because I'm a ${this.species}`
    console.log(str);
  },
  species: "human"
};

function Person(name, species) {
  this.name = name;
  this.species = species;
}

Person.prototype = personConstruction;

cara = new Person("Cara", "dog");
cara.greet(); // Hello, you. I'm Cara & I feel great because I'm a dog
</pre>
    <h4 class="chtitle dkblue">Line 19 nicely allows for overriding of the prototype by feeding in args to the <code class="dkred underline"><i class="y">new</i> <span class="ltgreen">Person</span> cara</code></h4>
    <div class="simple-frame">
      <h4 class="dkmango">This will blow your mind</h4> the methods 'placed on', or 'fed to' the <i class="ltgreen">new</i> Person are placed ON TOP OF the prototype. They STILL exist on the prototoype!
      <div class="slate-skyblue-fr w60"> Within the "var personConstruction" object... exist the defaults. These defaults ARE STILL ACCESSIBLE via the "__proto__" property!
      </div>
      <pre class="prettyprint w40">
cara.__proto__.name;
// "Default Anon"
cara.__proto__.species;
// "human"
...etc.
<img  class="w20" src="./img/proto1.png" alt=""></pre>

    </div>
  </div>
  <div class="framed5">
    <h3 class="pastred">call(); Apply();</h3>
    <pre class="prettyprint linenums w60">
var jim = {
  name: "Jim",
  opinion: function(fruit, dessert) {
    fruit = fruit || "oh--anything"; // if fruit or dessert don't exist feed in defaults;
    dessert = dessert || "a la mode";
     var str = `Hi, I'm ${this.name}. I ${this.verb} ${fruit} ${dessert}.`;
    console.log(str);
  },
  verb: "hate"
}

var liz = {
  name: "Elizabeth",
  fruit: "banana",
  dessert: "pie",
  opinion: jim.opinion,
  verb: "adore"
}

jim.opinion();
jim.opinion("choclate", "cake");
jim.opinion.call(liz);
jim.opinion.call(liz, "vanilla", "Sherbert" );
</pre>
    <h5 class="ivr">There are a few things going on here</h5>
  <span class="med">1. lines 04-05 establish conditional defaults. <br />  If no args are fed in, choose the defaults after "||".
 2. Of course, 'name' and 'verb' props exist. <br />  However, the <em class="y">${this.name}</em> allows for them to be 'hijacked' with call();
 3. line 16 'hijacks' the jim object's 'opinion' method.<br />
  <span class="ltgreen">liz.opinion();</span> renders // <span class="ans med ltgreen">Hi, I'm Elizabeth. I adore oh--anything a la mode.</span><br />
  <span class="ltgreen">jim.opinion.call(liz<sup class="ltred">*</sup>);</span> will give us the same. 4. <span class="ltgreen">jim.opinion();</span> renders // <span class="ans med ltgreen">Hi, I'm Jim. I hate oh--anything a la mode.</span><br /> 5.
  <span class="ltgreen">jim.opinion("chocolate", "cake");</span> renders // <span class="ans med ltgreen">Hi, I'm Jim. I hate chocolate cake.</span><br /> 6. <span class="ltgreen">jim.opinion.call(liz<sup class="ltred">*</sup>, "vanilla", "ice cream.");</span>    renders // <span class="ans med ltgreen">Hi, I'm Jim. I hate chocolate cake.</span><br />

    <sup class="orange">This context is established by first arg of .call();</sup>
    <hr> var args = ["peach", "cobbler"];
    <em class="dkblue">Obj.method</em>.apply(<span class="ltred"><em>this</em></span>, <span class="ivr">args</span>); can, thus be really powerful.

    </span>
  </div>
  <div class="framed5">
    <h3 class="chtitle wh">Nice way to delete a prop from an object</h3>

    <pre class="w40 dkghost ctr">
function groomer(inputObj) { //takes object and removes 'nat' prop
  let usables = Object.assign({}, inputObj);
  delete usables.nat;
  return usables;
}
  </pre>

  </div>
  <div class="forest-red-fr">
    <h3 class="chtitle">reduce()</h3>
    <h4 class="ltgreen">This method reduces entire array to a single value</h4>
    <pre class="prettyprint">
var array= [2,3,4,5,6,7];

var result = array.reduce(function(prev, next){
  return prev + next;
// arr[0]=prev, arr[1]=next the return val is fed into first arg "prev" (then, iterate)
});
console.log(result); // 27
</pre> However! reduce() has even more up it's sleeve! <br>
This has not <span class="y">one</span>, but <span class="orange">two</span> arguments!

    <h4 class="chtitle med dkbg ivr w40">arr.reduce(<span class="y">function(a,b){ return a+b }</span>, <span class="orange">{}</span>);</h4> This second arg defines the value of "prev" at initial iteration.

    <pre class="prettyprint">
  var array= ["apples", "pears", "bananas", "grapes"];

  var result = array.reduce(function(a, b){
    a[b] = b;
    return a;
  }, {});
  console.log(result);// Let's define "a" as an object and feed b as keys then values.
  <img src="./img/reduceobject1.png" class="w40 ans right" alt="reduce()"></pre> Let's try initial argument as a string!
    <pre class="prettyprint">
var result = array.reduce(function(a, b){
  a = a + " " + b;
  return a;
}, "I Love"); // "I Love apples pears bananas grapes"
</pre> Let's reduce array to divisible by 3s!
    <pre class="prettyprint">
var array= [2,3,4,5,6,7,8,9];

var divByThrees = array.reduce(function(arr, val){
  if (val % 3 === 0) {
    arr.push(val);
  }
  return arr;
},[]);

console.log(divByThrees);   // [3, 6, 9]</pre>
    <div class="framed5">
      <h3 class="chtitle">Filter out string items from an array with filter();</h3>
      <pre class="prettyprint w40">function filter_list(l) {
  return l.reduce(function(arr, val){
    if (typeof val !== 'string') {
      arr.push(val);
    }
    return arr;
  },[]);
}

filter_list([1,'a','b',0,15]);
// [1,0,15]</pre>
      <h3 class="chtitle wh">Solve this using filter();</h3>
      <pre class="prettyprint w60">function filter_list(l) {
  return l.filter(function(v) {return typeof v == 'number'})
}</pre> or... using coercion...
      <pre class="dkbg w20">function filter_list(l) {
  return l.filter(x=>x+0==x);
}
<span class="ltgreen">// [1,0,15]</span></pre>
    </div>


    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce?v=example" target="_blank">MDN Says</a> that reduce can take 4 args... prev, next, index, array (over which to be iterated). Here's a simple use
    case: At which indices are there even numbers in this array?
    <pre class="prettyprint w60">
//Months I jogged over 25 miles
var jogRec2016 = [17, 32, 16, 41, 67, 29, 34, 15, 66, 56, 37, 66];

var result = jogRec2016.reduce(function(prev, next, index) {
  if (next > 25){
    index = "Month " + index;
    prev[index]= next + " miles";
  }
  return prev; //must return the Object
},{}) <img src="./img/jobobject1.png" class="w10" alt="jogObject">
</pre> Return an object with repeated words:
    <pre class="prettyprint w60">var sentence = "He's a good person doing a good thing for a good person.";
var sentArr = sentence.split(' ');</pre> Let's first make an object.
    <pre class="prettyprint w60">
var result = sentArr.reduce(function(prev, next, index) {

  prev[next] = (prev[next] + 1) || 1; //each is given <em class="underline">at least</em> a val of one (so... "|| 1")

  return prev; // return Obj

},{})

console.log(result); <img src="./img/good.png" class="w10 right" alt="good"></pre> Now, simply test for <span class="pastY">val > 1</span>!!

    <pre class="prettyprint w60">var sentence = "He's a good person doing a good thing for a good person.";
var sentArr = sentence.split(' ');
var repeaters = [];
var result = sentArr.reduce(function(prev, next, index) {
  prev[next] = (prev[next] + 1) || 1;
  var key = sentArr[index];
  var val = prev[next];

<pre class="dkbg w20">
if (val > 1) {
  repeaters[key] = val;
}</pre> return prev; },{}) console.log(repeaters); // [a: 3, good: 3]</pre>
    <h4>Quiz: Why doesn't person show up in the object? <span class="ans mango med">Well, what does that item have that others don't?😎</span></h4>

    <h3>Of Course, it's useful to sum up array integers:</h3>
    <pre class="prettyprint">
  const hoursOfSleep = [5, 9, 7, 8, 6, 7, 7];

  const sum = hoursOfSleep.reduce((total, amount) =>  total + amount);

  console.log("I slept", sum, "hours this week"); // I slept 49 hours this week.
</pre> Here is <a target="_blank" href="https://medium.freecodecamp.com/reduce-f47a7da511a9">MUCH More on reduce();</a> at FCC.
  </div>

  <div class="forest-red-fr">
    <h3>Simple Callback</h3>

    <pre class="prettyprint linenums w80">
// First the bear bones
function addBoolean(listBool, boing) {
  listBool.push(true);
  boing();
}

function runInOrder(list) {
  list.push("runInOrder");
  addBoolean(list, function() {
    console.log(list);
//    console.log(listBool); --NB: listBool is undefined here. (Throws error)
  });
}
runInOrder([]) // ["runInOrder", true]
<hr />
// Now, with the explanatory logs
function addBoolean(listb, callback) {
  console.log(`4. up in addBoolean receiving list as 'listb'`, listb);
  let bool = true;
  listb.push(bool);
  console.log("5. push a bool 'true' onto list making 'listb ='", listb);
  console.log("6. execute callback()");
  callback();
}

function inOrder(list) {
  console.log(`1. the empty arr enters inOrder as: `, list);
  list.push("inOrder()");
  console.log(`2. I push a str: `, list);
  console.log(`3. I call addBoolean with: "addBoolean(listb, callback)"`);
  addBoolean(list, function() {
    console.log(`7. Array comes back as: `, list);
  });
}

inOrder([]) // sending empty array literal

<a href="http://www.pythontutor.com/visualize.html#mode=edit" target="_blank">Try Running it here!</a>
</pre>
<br><h4 class="ltred">Return the first in the array.</h4>
    <pre class="prettyprint">
var wines = ['Shiraz', 'Rose', 'Pinot', 'Cabernet', 'Grigio',  'Claret'];

var sentence = first(wines, function(firstWine){
  return 'The first wine of wines is ' + firstWine;
});

function first(arr, cb) {
  var find = arr[0];
  return cb(find);
}

console.log(sentence);
<br><h4 class="ltred">The first wine of wines is Shiraz.</h4>
</pre> <br><h4 class="ltred">Callback used to sift through an array of objects</h4>
    <pre class="prettyprint w40">
const flags = [{
    country: "Canada",
    colors: "Red & White"
  },
  {
    country: "USA",
    colors: "Red, White & Blue"
  },
  {
    country: "China",
    colors: "Red & Gold"
  }
];

function getFlagColorsByCountry(array, value, cb) {
  for (let i = 0; i < array.length; i += 1) {
    if (array[i].country === value) {
      cb(flags[i]);
    }
  }
}

getFlagColorsByCountry(flags, 'China', function(nation) {
  let result = nation.colors;
  console.log(result);
});  // "Red & white"

// -- inline callback</pre>
    <h4 class="chtitle y med">callback within a forEach();</h4>
    <h4 class="mango">function "arrayDisplay()" contains a .forEach(); & calls a cb on each item</h4>
    <pre class="ltbg dkred w50 ctr med">
var names = ["Louie", "George", "Chris", "Richard", "Seinfeld"];
function arrayDisplay(names, cb) {
    names.forEach(function(item, index) {
        cb(item, index);
    });
}

arrayDisplay(names, function(item, indice) {
    console.log('Item at index ' + indice + ' is ' + item)
});
</pre>
    <h4 class="chtitle dkblue med">❗️By the way this is solved easily in ES6❗️</h4>
    <pre class="prettyprint w40">for (prop of names) {
  let indices = names.indexOf(prop);
  console.log('Item at index', indices , " is ", prop);
}
</pre>
    <pre class="prettyprint w80">
const meals = { "Asian": "Pork", "Italian": "Pasta", "American": "Chicken" };
const pans = { "Pork": "Wok", "Pasta": "Frying Pan", "Chicken": "Deep Fryer" };
const oils = { "Wok": "Sesame", "Frying Pan": "Olive", "Deep Fryer": "Corn" };

var oil = function(pan, cb) {
  console.log("They eat cook it in a " + oils[pan]);
}

var vessel = function(meal, cb)  {
  console.log("They eat cook it in a " + pans[meal]);
  cb(pans[meal]) // callback's argument, having been identified, is now fed to the oil Function
}

var carne = function(nationality) {
  var mealArr = Object.keys(meals); // create array of meals
  for (var i = 0; i < mealArr.length; i++) {
    if (mealArr[i] === nationality) { // confirm key:val pair
      let nat = mealArr[i];
      let meal = meals[nat];
      console.log(nat + 's eat '+ meal);
      vessel(meal, oil); // Fn call with a callback
    }
  }
}
carne("Italian");
</pre>
  </div>
  <div class="simple-frame2">
    <h3 class="chtitle">.map() example</h3> Where .filter() returns a boolean (what criterion to test) that removes items... this method simply transforms the array and returns a new array.
    <h4>.map() iterates over each item, then returns a new array of same length. </h4>
    <pre class="prettyprint w40">
var people = [{
    name: "Sue",
    age: 23
  },
  {
    name: "Kim",
    age: 13
  },
  {
    name: "Joe",
    age: 21
  }
];

var ageArr = people.map(function(person){
  return person.age;
});
        // [23,13,21]
var names = people.map(function(foo.name){
  return foo.name;
})
</pre>
    <span class="orange">What does ES6 say about this?</span>
    <pre class="prettyprint w40">
var names = people.map((foo) => console.log(foo.name));
//or simply...
var names = people.map((foo) => foo.name);
      // ["Sue", "Kim", "Joe"]
</pre>

  </div>
  <div class="framed2 dkblue"> JSON.parse(); This object is in json and is useless to javascript:
    <h4 class="wh">...myObject.json file</h4><pre class="dkblue w20">{
  "people": [{
      "Name": "Alice",
      "online": true
    },
    {
      "Name": "Jeff",
      "online": false
    }
  ]
}</pre>
<pre class="w50 prettyprint">var parsedJson = JSON.parse(myObject);
  console.log(json); </pre> This code gives us an object we can work with in javascript. <img class="w20" src="./img/parsed.png" alt="">
  </div>
  <div class="framed2 dkbg">JSON.stringify();
    <pre class="prettyprint">
      var obj = {
          "people": [{
              "Name": "Alice",
              "online": true
            },
            {
              "Name": "Jeff",
              "online": false
            }
          ]
        };
        var stringedObj = JSON.stringify(obj);
        console.log(stringedObj);
</pre>
    <img class="w40" src="./img/stringified.png" alt="stringified">
  <h4 class="pastpink">This renders an object that has no white-space & it can be stored in the backend as VALID JSON.</h4>
  </div>


  <div class="framed3"><h3 class="ivr">Think of filter() as coffee. It filters OUT the grains.</h3>
    <pre class="prettyprint w40 ctr">
    coffee.filter(coffee) {
      return result === liquid;
    } // it's only going to spit out what we want</pre>
    <img class="w40 shadn ctr" src="./img/nodeFilter.png" alt="nodeFIlter">
    <h3 class="ivr">Here we only get anything if it equals what was queried.</h3>

  </div>
  <div class="simple-frame2">
    <h5>Audio Player (with some"> bugs)</h5>
    <h4><i class="underline">getAttribute</i> is useful. <br><i class="underline">setAttribute</i> is also available!
<br>.paused & .ended are properties available to the a/v object in HTML5.
<br><a target="_blank" href="https://www.w3schools.com/tags/ref_av_dom.asp">Breakdown of methods/properties on HTML5 audio/video object</a>
</h4>

<pre class="prettyprint w60 ctr">
var jukebox = document.querySelector('ul.player');

jukebox.addEventListener('click', function(e) {
  //create dyname song src with data- attribute
  var tgt = e.target;
  var song = tgt.getAttribute('data-src');
  var songPlaying = document.querySelector('#player');

  if (songPlaying) { // if playing, enable ability to pause.
    if (songPlaying.paused) {
      songPlaying.play();
      tgt.id = 'playing';
    } else { //if it hasn't been paused...
      songPlaying.pause();
      tgt.id = 'paused';
    }
  } else {
    var audioPlayer = document.createElement('audio');
    audioPlayer.id = 'player'; // create id for new elem
    tgt.id = 'playing';
    audioPlayer.src = song;
    document.body.appendChild(audioPlayer);
// now we need to execute the play method
    audioPlayer.play();

// IF DONE...remove playing id & audio tag in DOM
    audioPlayer.addEventListener('ended', function() {
//'ended' is a property on a/v objects in raw js. (html5)
    audioPlayer.parentNode.removeChild(audioPlayer);
    tgt.id = ''

    }, false);
  }
}, false);
</pre>
    <p class="dkblue"><em class="mango">BUG:</em> clicking on a playing song pauses, but clicking on another song continues the playing of original song--rather than the new song.
      <br /><b class="ltgreen">HINT: </b>The fix lies within the logic of the if-statement.</p>
    <pre class="dkbg code-sample w60 ctr">
    var jukebox = document.querySelector('ul.player');
    jukebox.addEventListener('click', function(e) {
      var tgt = e.target;
      var song = tgt.getAttribute('data-src');
      var <span class="orange">audioPlayer</span> = document.querySelector('#player');

      if (<span class="orange">audioPlayer</span>) {
        if (song === <span class="orange">audioPlayer</span>.getAttribute('src')) {
          if (<span class="orange">audioPlayer</span>.paused) {
            <span class="orange">audioPlayer</span>.play();
            tgt.id = 'playing';
          } else { //if it hasn't been paused...
            <span class="orange">audioPlayer</span>.pause();</span>
            tgt.id = 'paused';
          }
        } else {
          <span class="orange">audioPlayer</span>.src = song;
          <span class="orange">audioPlayer</span>.play();
          <span class="ltgrey">//whatever is playing (& has that id) --> remove that id.</span>
          <span class="orange">if(document.querySelector('#playing')){
            document.querySelector('#playing').id = '';
          }else { //if anything is paused, remove that id.
            document.querySelector('#paused').id = '';
          }
          tgt.id = 'playing';</span>
        }
      } else {
        var audioPlayer = document.createElement('audio');
        audioPlayer.id = 'player'; // create id for new elem
        tgt.id = 'playing';
        audioPlayer.src = song;
        document.body.appendChild(audioPlayer);
        audioPlayer.play();

        audioPlayer.addEventListener('ended', function() {
        audioPlayer.parentNode.removeChild(audioPlayer);
        tgt.id = ''

        }, false);
      }
    }, false);
</pre></div>
  <h2 class="ltblue">Loading Image</h2>
  <h4><a target="_blank" href="LINKADDY">No Link Yet</a></h4>

  <div class="simple-frame">
    <h5>Starting HTML</h5><img class="w40" src="./img/spinnerStart.png" alt="spinner starting html">
<pre class="w40 framed3 prettyprint ctr">
body {
  background: url(./img/sand.jpg), repeat;
  box-sizing: border-box;
}

.preview {
  display: block;
  border-radius: 20%;
  margin: 0 auto;
  margin-top: 300px;
}

.overlay {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 20;
}

.overlay img.bigImage {
  display: block;
  margin: 0 auto;
  min-width: 100%;
  min-height: 100%;
}

.spinner {
  display: block;
  position: absolute;
  top: 0;
  left: 50%;
  width: 200px;
  height: 200px;
  margin: 0 auto;
  margin-top: 400px;
}

.overlay img.spinner {
  position: absolute;
  display: block;
  top: 0;
  left: 50%;
  margin: 0 auto;
  margin-top: 300px;
}
</pre>

      <pre class="prettyprint w80">
    document.querySelector('img.preview').addEventListener('click', function(e) {
      var myOverlay = document.querySelector('.overlay');
      myOverlay.style.display = ('block');

      var mySpin = document.createElement('img');

      var hiRes = document.createElement('img');
      hiRes.className = "bigImage";

      var lowRes = e.target.src;

      // We chop off the last 11 letters of the name (sloth_LowRes.img) in the img file.
      // Then rename that remaining substr PLUS '.jpg'
      hiRes.src = lowRes.substr(0, lowRes.length - 11) + '.jpg';
      myOverlay.appendChild(hiRes);

      /* Up until now, on click of preview image, larger, hiRes img appears */
      mySpin.className = "spinner";
      mySpin.src = './img/spin.svg';
      myOverlay.appendChild(mySpin);

      hiRes.addEventListener('load', function() {
        mySpin.parentNode.removeChild(mySpin);
      })

    }, false);

      </pre>
      <p>The genius of this is the substr() method leveraging the smaller img file name<br />
        <i class="dkorange">NOTE:</i> Fast machines render the .spinner image unable to view.</p>

  </div>





<div class="slate-skyblue-fr">
  <h4 class="w20 ctr">events (Lynda)</h4>
  <h5>Adding event listeners</h5>
  <h6>Bascially they are no different in appearance from jQuery's events ('...on.('click', function(){}'...etc)</h6>
  <pre class="prettyprint">document.getElementById('thing').addEventListener('click', function() {
    alert("clicked the thing!")
},<span class="y underline">false</span>)</pre>
  <h6>for some tags we can use preventDefault()  * see below *</h6>
  <pre class="prettyprint">document.getElementById('container').addEventListener('click', function(e) {
    console.log("clicked the container!")
},false)

document.getElementById('link').addEventListener('click', function(e) {
    e.preventDefault()
    console.log("clicked the link!")
    <span class="underline y">e.stopPropagation();</span> // only 'clicked the link!' fires.
},false)</pre>
  <h5 class="dkred w40 ctrtxt">Capturing vs Bubbling</h5>
  <p>Propagation is about how events are registered and 'caught' vis-a-vis other elements. Here, <span class="dkorange">e.stopPropagation()</span> is called to prevent any events on parent elements. Therefore, we don't log to console</p>

  <h5>2 ways to register an event.<br>You can 'catch' the event in the <em class="dkorange underline">Capturing Phase</em> so that a 'higher' DOM element listens down to its children for an event. div->ul->li->a <br><br>
Otherwise, an evt can be registered on the lowest element until it <em>bubbles</em> up to the div <br>
This is called capturing the event in <em class="dkorange underline">the Bubbling Phase</em></h5>
  <pre class="prettyprint">
  document.getElementById('container').addEventListener('click', function(e) {
        console.log("clicked the container!")
  },<span class="underline">false</span>)

  document.getElementById('journalLink').addEventListener('click', function(e) {
    e.preventDefault()
    document.querySelector('#journalLink').style.color ='white';
    console.log(e.toElement.id);<sup class="ltred">*</sup>
  },<span class="underline">false</span>)

//having set both to false, the event will bubble up and return "journal" FIRST! and then "clicked container!"</pre>
  <p><sup class="wh">*</sup>this is part of the 'e' object which gives the id value</p>

  <div class="forest-red-fr"><pre>
  When you add an event handler to the event target itself, bubble vs capture is not applicable.
  At that level, you're not capturing or bubbling--you're on the target itself.
  The event handlers fire in the order in which they were registered.
</pre></div>
  <h4 class="w60 dkblue">One more example:</h4>
  <div class="caption-box">
    <img class="fRight w10" src="./img/link1.png" alt="link1">
    <br>
    < div <span class="dkorange">id="myDiv"></span>
      < div>
        < a <span class="dkorange">id="coralLink"</span> href="https://www.google.com">LINK
          < /a>
            < /div>
              < /div>
  </div><br><pre class="prettyprint">
    var myDiv = document.getElementById('myDiv');
    var coralLink = document.getElementById('coralLink');
    coralLink.addEventListener('click', function(e) {
      e.preventDefault();
      console.log('clicked CoralLink');
    }, true)

    myDiv.addEventListener('click', function() {
      console.log("clicked container");
    }, true)
  </pre>
  <div class="framed2 w40">
    <h5 class="fLeft">What will log first if I click on link?</h5>
    <img class="ans w20" src="./img/log1.png" alt="">
  </div>
  <h4 class="w60 ctrtxt"><span class="dkred">REMEMBER: </span>'true' = capture phase.   'false' = Bubble Phase</h4>


</div>

  <h5 class="ctrtxt w80">Event Issues (lynda Vid 5)</h5>
  <div class="framed2">
    <img class="w40" src="img/event2.png" alt="">
    <img class="w40" src="img/event1.png" alt="">
    <pre class="prettyprint">document.querySelector('#imgDiv').addEventListener('click', function(e) {
  var tgt = e.target;
  var tgtDad = e.target.parentNode; //parent of target
  var elemAmt = this.parentNode.querySelectorAll('div.subdiv').length; //counter

  if ((e.target.id !== 'imgDiv') && (elemAmt > 1)) { //until 1 remains and is not the containing div
    e.toElement.parentNode.removeChild(e.toElement);
  } else { // when only 1 remains...
    var photoTitle = e.target.title; //get title attr value
    document.getElementById('content').innerText = photoTitle //replace existing text
  }
}, false); //regist evt on image first! Bubble Phase
</pre>
  </div>

  <div class="forest-red-fr">
    <h4 class="ctrtxt w80 underline">Creating elements with events</h4>
    <h5 class="dkblue">This is always a 3 step process</h5>
    <pre>
<p>1. Create element in memory (on a var)
2. Modify/define attrs, etc.
3. Attach it to the DOM</p>
</pre>
  </div>

  <div class="framed3 ltbg">Here's a clever way to put targets on a nodeList
    <pre class="prettyprint">
// this turns a nodelist into an array-like object [they have length and indices]
// which can be queried.

var myTgts = document.getElementsByClassName('subdiv');
  for (var i = 0; i < myTgts.length; i++) {
    myTgts[i].addEventListener('click', function myFunction(e){
      alert("yes");
      console.log("tgt", e.target);
  }, false);
}</pre></div>

  <h4>Using the example above. We create a div element to appear & then disappear with a mouseover evt</h4>
  <pre class="prettyprint">var myTgts = document.getElementsByClassName('subdiv');
// this turns a nodelist into an array-like object [they have length and indices]
// which can be queried.

for (var i = 0; i < myTgts.length; i++) { //placing listener on each elem.
    myTgts[i].addEventListener('mouseover', handler, false);
}

function handler(e) {

  var nuElem = document.createElement('div'); //created in memory
  // New element 'profile'
  nuElem.id = 'nuElem';
  // NOTE: "nuElem.class" WILL NOT WORK (it's a .js keyword!)
  nuElem.className = 'spawned';
  e.target.parentNode.appendChild(nuElem); //attach

  e.target.addEventListener('mouseout', function mOutHandler(f) {
    var myNode = f.target.parentNode.querySelector('div.spawned'); //thing I want to delete or remove.
    nuElem.parentNode.removeChild(myNode);
  }, false);
};</pre>
  <div class="ltbg">
    <p class="dkred">While this seems to work well, it creates more mouseout events and throws errors. Therefore, we need to remove events. <br>This line of code can begin with 'this' or e.target. It will remove the mouseout with the named function mOutHandler</p>
    <pre class="prettyprint dkred w60">  this.removeEventListener('mouseout', mOutHandler, false);</pre>
  <h3 class="dkred">mOutHandler function looks like this (with the new line of code)</h3>
  <pre class="simple-frame w60 ctr">  e.target.addEventListener('mouseout', function mOutHandler(f) {
    var myNode = f.target.parentNode.querySelector('div.spawned'); //thing I want to delete or remove.
    nuElem.parentNode.removeChild(myNode);
    <span class="dkorange">this.removeEventListener('mouseout', mOutHandler, false);</span>
  }, false);</pre>

</div>

  <hr>
<div class="simple-wine-frame">  <h2 class="ltblue">setTimeout & setInterval : using Kirupa & Dan Wellman's tutes</h2>

  <pre class="prettyprint w80">
        setTimeout('console.log("bad!")', 4000); // 'bad' (after 4 secs)</pre>
  <p class="dkred"><sup class="ltred">*</sup>setTimeout is one of many methods that take a string and evaluate it as if it were code. But this is dangerous and insecure.
    <span class="ltred">NEVER pass a str as a first argument.</span></p>
  <pre class="prettyprint w40">
function log() {
  console.log("Hi there!");
}
setTimeout(log, 4000);
//(after 4sec) Hi there!
</pre>
  <h5><sup class="dkred">Here we call the named Fn instead of an interpolated string.</h5>

  <pre class="prettyprint w60">
  setTimeout(function log(msg) {
      console.log('Hi (using entire Fn as an arg)');
  }, 4000);

  <div class="dkbg">var logger = function log(msg) {
      console.log('Hi (using variable)');
  }
  setTimeout(logger, 4000);</div></pre>
  <h5 class="dkbg wh w60">2nd example uses setTimeout calling a Fn expression</h5>
  <h5 class="ctrtxt"><span class="underline navy">SetInterval</span> is a setTimeout that simply repeats itself.</h5>
  <pre class="prettyprint w60">
  function bounce(msg) {
    console.log("boing, boing");
  }
  setInterval(bounce, 3000);
  // boing, boing (every 3secs ad infinitum)
</pre>
  <h5>Now, we must define the interval in order to end it.
  We use <span class="dkorange">clearTimeout()</span> & <span class="dkorange">clearInterval()</span> methods.</h5>
  <pre class="prettyprint w60">
  let counter = 0;
  function bounce() {
    console.log("boing");
    counter += 1;

    if (counter === 5) {
      clearInterval(interval);
    }
  }
  var interval = setInterval(bounce, 3000);</pre>
  <h4><a target="_blank" href="https://youtu.be/zucCjXApXOU">Kirupa Tutorial</a></h4>
  <h4 class="ltbg w60">setTimeout(<span class="dkorange">anyFunction</span>, <em>timedelay</em>)</h4>
  <h4 class="ltbg w60">clearTimeout(<span class="dkorange">timeID</span>)</h4>
  <h6 class="">start it and cancel it.</h6> requestAnimationFrame() --requests a repaint and runs code as part of that repaint.
  <pre class="prettyprint w40 ctr">
let timeID = setTimeout(runCode, 4000);
clearTimeout(timeID);</pre> Here's an example;
  <pre class="prettyprint w60">
var btn = $('button');

function drawText() {
  btn.after('< h1>Boom!< /h1>')
}

var timeID = setTimeout(drawText, 14000);
btn.on('click', function() {
btn.after('< h4>You cancelled it.< /h4>')
  clearTimeout(timeID);
})</pre>
<div class="brdr-w w50 ctr">
  var timeID =requestAnimationFrame(<em class="navy">anyFunction</em>)
  requestAnimationFrame(<em class="navy">timeID</em>)
</div>
  <h6>This is not part of some javascript browser's timer, but part of the browser's paint pipeline. It is more efficient and performant.</h6>
  <pre class="prettyprint w40">
function drawText() {
  btn.after('< hr /> < h1>Boom!< /h1>')
}

function animationLoop() {
  drawText();
}
btn.on('click', function() {
  animationLoop();
})
</pre>
  <h5>This uses gpu & cpu information to optimize performance.</h5>
  <pre class="prettyprint w50">
  var currentPos = 0;
  var thing = document.querySelector("#thing")
  var requestAnimationFrame = window.requestAnimationFrame;

  function moveThing () {
    currentPos+= 5;
    thing.style.transform = "translate3d(" + currentPos + "px, 30px, 0px)";
    if (Math.abs(currentPos) >= 900) {
      currentPos = - 500;
    }
    requestAnimationFrame(moveThing);
  }

  moveThing();
</pre>
  <em>cf.</em> <a href="https://youtu.be/rNsC1VI9388">Kirupa: requestAnimationFrame() for animation video</a>
  <img class="w40" src="./img/warning.png" alt="Don't use setTimeout in animations">


</div>  <hr>
<div class="framed2">
  <h2 class="ltblue">Nice version of isPalindrome() using regex</h2>
  <h4><a target="_blank" href="https://medium.freecodecamp.com/two-ways-to-check-for-palindromes-in-javascript-64fea8191fd7">FCC Link</a></h4>
  <pre class="prettyprint w80">

  function isPalindrome(str) {
    var re = /[\W_]/g;
    var lowRegStr = str.toLowerCase().replace(re, ''); //replaces all non chars with nothing.
    var revStr = lowRegStr.split('').reverse().join(''); //makes Arr, revs, joins.
    var bool = lowRegStr === revStr; //two Strings compared
    return bool; //truthy return
  }
  isPalindrome("naan")
  isPalindrome("Beau")

</pre>
  <h2 class="ltblue">Nice example of <span class="dkred">.replace()</span> String method</h2>
  <h4><a target="_blank" href="https://www.tutorialspoint.com/java/java_string_replace.htm">link</a></h4>

  <pre class="prettyprint w80">

  var happyThought = "This is really great!";
  var sadThought = "tragic!";

  var newThought = happyThought.replace('great!', sadThought);
  // Simple String Method: first arg is old substr, 2nd arg is nuSubstr.

  console.log(newThought);

</pre>
  <hr>
  <h2 class="ltblue">Nice example of <span class="dkred">recursion</span> with factorials</h2>
  <h4><a target="_blank" href="https://frontendmasters.com/courses/computer-science/exercise-1-solution">solution explained here</a></h4>

  <pre class="prettyprint w80">

  function factorialize(num) {
      if (num < 2) {
        return 1;
      }
      return num * factorialize(num - 1);
    }

    factorialize(17);
    factorialize(3);
    factorialize(20);
  </pre>
  <span class="ltred bg">Open another browser to run it to avoid mishaps with infinite loops</span>



  <hr>

  <h2 class="ltblue">Nice example of String Method: <span class="dkred">.replace();</span></h2>
  <h4><a target="_blank" href="https://www.freecodecamp.com/challenges/search-and-replace">search-and-replace</a></h4>

  <pre class="prettyprint w80">

  function myReplace(str, before, after) {

        if (before === before.toLowerCase()) {
          str.replace(before, after);
          return str.replace(before, after);
        } else {

          var newafter = after.replace(after[0], after[0].toUpperCase())
          return str.replace(before, newafter);
        }

      }
  //myReplace('A quick brown fox jumped over the lazy dog', 'jumped', 'leaped')
  myReplace('He is Sleeping on the couch', 'Sleeping', 'sitting')

</pre>

</div>

  </pre>

</div>
<!--entry end-->


</div>

<!-- <h2 class="ltblue">TITLEHERE</h2>
<h4><a target="_blank" href="LINKADDY">LINKTITLE</a></h4>
<pre class="prettyprint w80">
  CODEPLACEHOLDER
</pre>
<p>CAPTION PLACEHOLDER</p>
-->
